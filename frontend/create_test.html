<!DOCTYPE html>
<html>
<head>
    <title>Create Test</title>
    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta12/dist/css/tabler.min.css" rel="stylesheet">
</head>
<body class="p-4">
<!-- â­ HOME BUTTON (top-right) â­ -->
<a href="/dashboard" class="btn btn-dark" style="position:absolute; top:20px; right:20px;">
    ğŸ  Home
</a>

<h2>Create Test</h2>

{% if success %}
<div class="alert alert-success">
    {{ message }}
</div>
{% endif %}

<form id="createTestForm" method="POST" action="/admin/save-test">

    <label class="form-label">Test Name</label>
    <input type="text" name="test_name" class="form-control" required>

    <label class="form-label mt-3">Total Marks</label>
    <input type="number" name="total_marks" class="form-control" required>

    <label class="form-label mt-3">Duration (Minutes)</label>
    <input type="number" name="duration" class="form-control" required>

    <!-- â­ NEW DUE DATE FIELD WITH NO-PAST RESTRICTION -->
    <label class="form-label mt-3">Due Date</label>
    <input type="date" name="due_date" id="due_date" class="form-control" required>

    <label class="form-label mt-3">Questions Selected</label>
    <ul>
        {% for q in questions %}
            <li>{{ q.id }} â€” {{ q.question_text }}</li>
        {% endfor %}
    </ul>

    <input type="hidden" name="question_ids" value="{{ ids }}">

    <button class="btn btn-success mt-3">Create Test</button>

</form>

<script>
// â­ Prevent past dates
const today = new Date().toISOString().split("T")[0];
document.getElementById("due_date").setAttribute("min", today);
</script>

</body>
</html>
